PROJECT(lib2geom CXX)
SET(2GEOM_VERSION 0.1.0)
SET(CMAKE_BACKWARDS_COMPATIBILITY 2.4)
SET(CMAKE_INCLUDE_CURRENT_DIR TRUE)

SET(CMAKE_INSTALL_RPATH ${CMAKE_INSTALL_PREFIX}/lib)
SET(CMAKE_SKIP_RPATH:BOOL OFF)
SET(CMAKE_MODULE_PATH ${PROJECT_SOURCE_DIR}/CMakeScripts)
INCLUDE(Config2GeomDepends)

INCLUDE_DIRECTORIES (src/)
LINK_DIRECTORIES (src/)

IF(gsl_FOUND)
# must have GSL
    SET(NEEDS_GSL 
    differential-constraint
    root-finder-comparer
    )
    SET(LINK_GSL ${gsl_LINK_FLAGS})
    SET(gsl_CFLAGS "${gsl_CFLAGS} -DHAVE_GDL")
ENDIF(gsl_FOUND) 

# Set Compiler Flags
SET(CMAKE_CXX_FLAGS "${GTK2_CFLAGS} ${cairo_CFLAGS} ${gsl_CFLAGS}")
SET(CMAKE_MAKE_PROGRAM "${CMAKE_MAKE_PROGRAM} -j2")

SET(CMAKE_MAJOR_MINOR "${CMAKE_MAJOR_VERSION}.${CMAKE_MINOR_VERSION}")
IF("${CMAKE_MAJOR_MINOR}" STREQUAL "2.2")
    SET(CMAKE_AR "ar")
    SET(CMAKE_RANLIB "ranlib")
ENDIF("${CMAKE_MAJOR_MINOR}" STREQUAL "2.2")

OPTION(2GEOM_BUILD_SHARED
  "Build lib2geom and libtoy as shared libraries."
  OFF)
IF(2GEOM_BUILD_SHARED)
    SET(LIB_TYPE SHARED)
ELSE(2GEOM_BUILD_SHARED)
    SET(LIB_TYPE STATIC)
ENDIF(2GEOM_BUILD_SHARED)

ADD_SUBDIRECTORY (src)
